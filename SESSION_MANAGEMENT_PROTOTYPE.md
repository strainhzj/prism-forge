# ä¼šè¯ç®¡ç†åŠŸèƒ½åŸå‹è¯´æ˜

> **åˆ›å»ºæ—¥æœŸ**: 2025-01-09
> **åŠŸèƒ½**: ç›‘æ§ç›®å½•ä¼šè¯ç®¡ç†å¢å¼º

---

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

ç”¨æˆ·å¯ä»¥åœ¨å·¦ä¾§æ·»åŠ ç›‘æ§ç›®å½•ï¼Œç‚¹å‡»ç›®å½•åå³ä¾§æ˜¾ç¤ºè¯¥ç›®å½•å¯¹åº”çš„ä¼šè¯æ–‡ä»¶åˆ—è¡¨ï¼ˆæŒ‰æ—¶é—´å€’åºï¼‰ï¼Œç‚¹å‡»ä¼šè¯åæŸ¥çœ‹ä¼šè¯å†…å®¹ã€‚

---

## ğŸ¯ æ ¸å¿ƒæµç¨‹

### 1. æ·»åŠ ç›‘æ§ç›®å½•
```
ç”¨æˆ·ç‚¹å‡»"æ·»åŠ ç›®å½•"
  â†“
é€‰æ‹©æœ¬åœ°é¡¹ç›®è·¯å¾„ï¼ˆå¦‚ C:\software\Java\projectï¼‰
  â†“
è‡ªåŠ¨æå–æ–‡ä»¶å¤¹åï¼ˆå¯è‡ªå®šä¹‰ä¿®æ”¹ï¼‰
  â†“
ä¿å­˜åˆ°æ•°æ®åº“
```

### 2. æŸ¥çœ‹ä¼šè¯åˆ—è¡¨
```
ç”¨æˆ·ç‚¹å‡»ç›‘æ§ç›®å½•
  â†“
è·¯å¾„è½¬æ¢ï¼šC:\software\Java\project â†’ C--software-Java-project
  â†“
æŸ¥æ‰¾ä¼šè¯ç›®å½•ï¼š~/.claude/projects/C--software-Java-project/
  â†“
æ‰«æ .jsonl æ–‡ä»¶
  â†“
æŒ‰ä¿®æ”¹æ—¶é—´å€’åºæ˜¾ç¤ºï¼ˆæ‡’åŠ è½½ï¼Œæ¯æ¬¡20æ¡ï¼‰
```

### 3. æŸ¥çœ‹ä¼šè¯å†…å®¹
```
ç”¨æˆ·ç‚¹å‡»ä¼šè¯æ–‡ä»¶
  â†“
è§£æ .jsonl æ–‡ä»¶
  â†“
æŒ‰ Session Log å½¢å¼æ˜¾ç¤ºï¼ˆå€’åºï¼‰
  â†“
æ”¯æŒè¿”å›åˆ—è¡¨
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### **å‰ç«¯ç»„ä»¶ç»“æ„**

```
SessionsPage (ä¸¤æ€åˆ‡æ¢)
â”œâ”€â”€ ProjectSidebar (å·¦ä¾§ç›®å½•åˆ—è¡¨)
â”‚   â”œâ”€â”€ ç›‘æ§ç›®å½•åˆ—è¡¨
â”‚   â”œâ”€â”€ æ·»åŠ ç›®å½•æŒ‰é’®
â”‚   â””â”€â”€ æ“ä½œæŒ‰é’®ï¼ˆå¯ç”¨/ç¦ç”¨/åˆ é™¤ï¼‰
â”‚
â””â”€â”€ å³ä¾§å†…å®¹åŒºï¼ˆçŠ¶æ€æœºï¼‰
    â”œâ”€â”€ [æ€1] SessionFileList
    â”‚   â”œâ”€â”€ ä¼šè¯æ–‡ä»¶åˆ—è¡¨ï¼ˆæ—¶é—´å€’åºï¼‰
    â”‚   â”œâ”€â”€ æ‡’åŠ è½½ï¼ˆIntersection Observerï¼‰
    â”‚   â””â”€â”€ å‹å¥½çš„æ—¶é—´æ˜¾ç¤º
    â”‚
    â””â”€â”€ [æ€2] SessionContentView
        â”œâ”€â”€ Session Log å½¢å¼æ˜¾ç¤º
        â”œâ”€â”€ å€’åºæ’åˆ—ï¼ˆæœ€æ–°åœ¨æœ€ä¸Šé¢ï¼‰
        â””â”€â”€ åˆ·æ–°æŒ‰é’®
```

### **åç«¯æ¨¡å—ç»“æ„**

```
path_resolver/
â”œâ”€â”€ converter.rs       # è·¯å¾„è½¬æ¢ï¼ˆWindows â†’ Claude æ–‡ä»¶å¤¹åï¼‰
â”œâ”€â”€ resolver.rs        # è·¯å¾„è§£æå’Œä¼šè¯æ–‡ä»¶æ‰«æ
â””â”€â”€ mod.rs            # æ¨¡å—å¯¼å‡º

commands.rs
â””â”€â”€ get_sessions_by_monitored_directory()  # æ–°å¢ Tauri å‘½ä»¤
```

---

## ğŸ“ å¸ƒå±€ç¤ºæ„

### **ä¸¤æ å¸ƒå±€**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¶éƒ¨å¯¼èˆªæ ï¼ˆä¼šè¯ç®¡ç†ï¼‰                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ProjectSidebar    â”‚ å³ä¾§å†…å®¹åŒºï¼ˆçŠ¶æ€æœºï¼‰           â”‚
â”‚                   â”‚                              â”‚
â”‚ ğŸ“ ç›‘æ§ç›®å½•åˆ—è¡¨    â”‚ [æ€1] ä¼šè¯æ–‡ä»¶åˆ—è¡¨             â”‚
â”‚  â””â”€æˆ‘çš„é¡¹ç›®        â”‚  ğŸ“ 2025-01-09 12:34        â”‚
â”‚  â””â”€æµ‹è¯•é¡¹ç›®        â”‚     xxx-xxx...              â”‚
â”‚  â””â”€æ—§é¡¹ç›®          â”‚  ğŸ“ 2025-01-09 10:20        â”‚
â”‚                   â”‚     xxx-xxx...              â”‚
â”‚ [æ·»åŠ ç›®å½•]        â”‚  ğŸ“ 2025-01-08 16:45         â”‚
â”‚ [åˆ·æ–°]            â”‚     xxx-xxx...              â”‚
â”‚                   â”‚                              â”‚
â”‚                   â”‚ [æ€2] ä¼šè¯å†…å®¹ï¼ˆç‚¹å‡»åï¼‰       â”‚
â”‚                   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚                   â”‚  USER (12:34:56)            â”‚
â”‚                   â”‚  è¯·å¸®æˆ‘å®ç°è¿™ä¸ªåŠŸèƒ½           â”‚
â”‚                   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚                   â”‚  ASSISTANT (12:35:12)       â”‚
â”‚                   â”‚  å¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ å®ç°...        â”‚
â”‚                   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚                   â”‚  [â† è¿”å›åˆ—è¡¨] [åˆ·æ–°]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### **è·¯å¾„è½¬æ¢ç®—æ³•**

**è§„åˆ™**ï¼š
1. é©±åŠ¨å™¨å­—æ¯å¤„ç†ï¼š`C:` â†’ `C-`
2. åæ–œæ æ›¿æ¢ï¼š`\` â†’ `-`
3. ç§»é™¤å…¶ä»–å†’å·ï¼š`port:8080` â†’ `port8080`
4. ä¿ç•™ç‰¹æ®Šå­—ç¬¦ï¼šç©ºæ ¼ã€ç‚¹ã€ä¸­æ–‡ç­‰

**ç¤ºä¾‹**ï¼š
```
C:\software\Java\project â†’ C--software-Java-project
D:\Projects\My App\v2.0  â†’ D--Projects-My App-v2.0
C:\è½¯ä»¶\é¡¹ç›®\æµ‹è¯•         â†’ C--è½¯ä»¶-é¡¹ç›®-æµ‹è¯•
```

### **æ‡’åŠ è½½å®ç°**

ä½¿ç”¨ `IntersectionObserver` APIï¼š
```typescript
const observer = new IntersectionObserver(
  (entries) => {
    if (entries[0].isIntersecting) {
      setDisplayedCount((prev) => Math.min(prev + 20, sessions.length));
    }
  },
  { threshold: 0.1 }
);
```

### **æ—¶é—´å‹å¥½æ˜¾ç¤º**

```typescript
function formatRelativeTime(isoTime: string): string {
  const diffMins = Math.floor((Date.now() - new Date(isoTime).getTime()) / 60000);

  if (diffMins < 1) return 'åˆšåˆš';
  if (diffMins < 60) return `${diffMins}åˆ†é’Ÿå‰`;
  if (diffMins < 1440) return `${Math.floor(diffMins / 60)}å°æ—¶å‰`;
  return `${Math.floor(diffMins / 1440)}å¤©å‰`;
}
```

---

## ğŸ“ æ•°æ®æµå‘

```
ç”¨æˆ·æ“ä½œ â†’ React ç»„ä»¶
         â†“
   Tauri invoke(å‘½ä»¤)
         â†“
   Rust Command Handler
         â†“
   path_resolver (è·¯å¾„è½¬æ¢)
         â†“
   æ–‡ä»¶ç³»ç»Ÿæ‰«æ
         â†“
   è¿”å›ç»“æœ â†’ å‰ç«¯æ›´æ–°çŠ¶æ€
```

---

## âœ… å·²å®ç°çš„åŠŸèƒ½

- [x] è·¯å¾„è½¬æ¢æ¨¡å—ï¼ˆWindows â†’ Claude æ–‡ä»¶å¤¹åï¼‰
- [x] Rust åç«¯å‘½ä»¤ï¼ˆè·å–ç›®å½•ä¸‹çš„ä¼šè¯æ–‡ä»¶ï¼‰
- [x] ProjectSidebar ä¿®å¤ï¼ˆç§»é™¤é”™è¯¯åµŒå¥—ï¼‰
- [x] SessionFileList ç»„ä»¶ï¼ˆæ‡’åŠ è½½ã€æ—¶é—´æ’åºï¼‰
- [x] SessionContentView ç»„ä»¶ï¼ˆSession Log å½¢å¼ï¼‰
- [x] SessionsPage ä¸¤æ€åˆ‡æ¢é€»è¾‘
- [x] Skeleton åŠ è½½çŠ¶æ€ç»„ä»¶

---

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **ç¼–è¯‘æµ‹è¯•**ï¼šç¡®ä¿ä»£ç å¯ä»¥æ­£å¸¸ç¼–è¯‘
2. **åŠŸèƒ½æµ‹è¯•**ï¼šæµ‹è¯•å®Œæ•´æµç¨‹
3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - ç¼“å­˜å·²æ‰«æçš„ä¼šè¯åˆ—è¡¨
   - å¢é‡æ‰«æç­–ç•¥
4. **é”™è¯¯å¤„ç†**ï¼šå®Œå–„è¾¹ç•Œæƒ…å†µå¤„ç†
5. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - æ·»åŠ æœç´¢/è¿‡æ»¤åŠŸèƒ½
   - æ‰¹é‡æ“ä½œï¼ˆåˆ é™¤ã€å½’æ¡£ç­‰ï¼‰

---

## ğŸ” è°ƒè¯•æç¤º

**å‰ç«¯è°ƒè¯•**ï¼š
```typescript
const DEBUG = import.meta.env.DEV;
debugLog('[ComponentName]', 'action', data);
```

**åç«¯è°ƒè¯•**ï¼š
```rust
#[cfg(debug_assertions)]
eprintln!("è°ƒè¯•ä¿¡æ¯: {:?}", data);
```

**æŸ¥çœ‹è·¯å¾„è½¬æ¢ç»“æœ**ï¼š
```bash
# åœ¨ Rust ä»£ç ä¸­æ·»åŠ æ—¥å¿—
debug_log!("[PathConverter] åŸå§‹è·¯å¾„: {}", path);
debug_log!("[PathConverter] è½¬æ¢ç»“æœ: {}", result);
```

---

**æ–‡æ¡£ç»“æŸ** | æœ€åæ›´æ–°: 2025-01-09
